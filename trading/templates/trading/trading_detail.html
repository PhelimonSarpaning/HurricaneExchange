{% extends 'base.html' %}

{% block content %}
<h1>Trading Account: {{ trading_account.trading_name }}</h1>
<h2>Shares in your trading account </h2>

<h3>{{ no_stock }}</h3>

<table class="table table-striped">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Stock</th>
      <th scope="col">Number of Shares</th>
      <th scope="col">Value (per share)</th>
      <th scope="col">Daily Change</th>
      <th> Total Value</th>
      <th scope="col"></th>
      <th></th>

    </tr>
  </thead>
  <tr>
    {% for shares in share_list %}
       <tr>
         {% for key, value in shares.items %}
          {% if key == 'shares' %}
          <th> <a href="/stock/buy/{{ value.stockID.stock_ticker }}/">{{ value.stockID.stock_name }}</a> </th>
          <th> {{value.shares_amount}} </th>
          <th> {{value.stockID.stock_price}} </th>
          <th>{% if value.stockID.stock_dayChange > 0 %}
              <div style="color:green">{{value.stockID.stock_dayChange}}<i class="material-icons" style ="vertical-align:middle;">arrow_drop_up</i></div>
          {% elif value.stockID.stock_dayChange < 0 %}
              <div style="color:red">{{value.stockID.stock_dayChange}}<i class="material-icons" style ="vertical-align:middle;">arrow_drop_down</i></div>
          {% else %}
              <div style="color:green">{{value.stockID.stock_dayChange}}</div>
          {% endif %}
          </th>
            {% elif key == 'shares_price' %}
              <th> ${{value}}  </th>
            {% endif %}
          {% endfor %}
          <th> <button onclick="window.location.href='/stock/{{trading_account.id}}/sell/{{share.stockID.stock_ticker}}'" class= "btn-secondary btn-sm">Sell</button> </th>
          <td></td>
       </tr>
    {% endfor %}
  </table>

<form action="/stock/stocklist">
    <button type="submit">Buy Shares</button>
</form>

<br>


{% if trading_account.is_default != True %}
  <form action="." method='POST'>
    {% csrf_token %}
    <button type="submit">Make this my default trading account</button>
  </form>
{% endif %}

<br>

<form action="/trading/delete/{{ trading_account.id }}">
    <button type="submit">Delete this trading account</button>
</form>

{% endblock %}
